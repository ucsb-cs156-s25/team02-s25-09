import {
  __export,
  __require
} from "./chunk-MTI3AIJG.js";

// node_modules/@storybook/core/dist/client-logger/index.js
var u = Object.defineProperty;
var a = (e2, o2) => u(e2, "name", { value: o2, configurable: true });
var y = (() => {
  let e2;
  return typeof window < "u" ? e2 = window : typeof globalThis < "u" ? e2 = globalThis : typeof global < "u" ? e2 = global : typeof self < "u" ? e2 = self : e2 = {}, e2;
})();
var { LOGLEVEL: b } = y;
var t = {
  trace: 1,
  debug: 2,
  info: 3,
  warn: 4,
  error: 5,
  silent: 10
};
var L = b;
var i = t[L] || t.info;
var s = {
  trace: a((e2, ...o2) => {
    i <= t.trace && console.trace(e2, ...o2);
  }, "trace"),
  debug: a((e2, ...o2) => {
    i <= t.debug && console.debug(e2, ...o2);
  }, "debug"),
  info: a((e2, ...o2) => {
    i <= t.info && console.info(e2, ...o2);
  }, "info"),
  warn: a((e2, ...o2) => {
    i <= t.warn && console.warn(e2, ...o2);
  }, "warn"),
  error: a((e2, ...o2) => {
    i <= t.error && console.error(e2, ...o2);
  }, "error"),
  log: a((e2, ...o2) => {
    i < t.silent && console.log(e2, ...o2);
  }, "log")
};
var c = /* @__PURE__ */ new Set();
var n = a((e2) => (o2, ...l2) => {
  if (!c.has(o2))
    return c.add(o2), s[e2](o2, ...l2);
}, "once");
n.clear = () => c.clear();
n.trace = n("trace");
n.debug = n("debug");
n.info = n("info");
n.warn = n("warn");
n.error = n("error");
n.log = n("log");
var m = n("warn");
var r = a((e2) => (...o2) => {
  let l2 = [];
  if (o2.length) {
    let f3 = /<span\s+style=(['"])([^'"]*)\1\s*>/gi, p2 = /<\/span>/gi, d2;
    for (l2.push(o2[0].replace(f3, "%c").replace(p2, "%c")); d2 = f3.exec(o2[0]); )
      l2.push(d2[2]), l2.push("");
    for (let g2 = 1; g2 < o2.length; g2++)
      l2.push(o2[g2]);
  }
  s[e2].apply(s, l2);
}, "pretty");
r.trace = r("trace");
r.debug = r("debug");
r.info = r("info");
r.warn = r("warn");
r.error = r("error");

// node_modules/@storybook/core/dist/core-events/index.js
var core_events_exports = {};
__export(core_events_exports, {
  ARGTYPES_INFO_REQUEST: () => SE,
  ARGTYPES_INFO_RESPONSE: () => TE,
  CHANNEL_CREATED: () => T,
  CHANNEL_WS_DISCONNECT: () => S,
  CONFIG_ERROR: () => N,
  CREATE_NEW_STORYFILE_REQUEST: () => O,
  CREATE_NEW_STORYFILE_RESPONSE: () => A,
  CURRENT_STORY_WAS_SET: () => r2,
  DOCS_PREPARED: () => D,
  DOCS_RENDERED: () => I,
  FILE_COMPONENT_SEARCH_REQUEST: () => o,
  FILE_COMPONENT_SEARCH_RESPONSE: () => C,
  FORCE_REMOUNT: () => P,
  FORCE_RE_RENDER: () => L2,
  GLOBALS_UPDATED: () => U,
  NAVIGATE_URL: () => G,
  PLAY_FUNCTION_THREW_EXCEPTION: () => a2,
  PRELOAD_ENTRIES: () => t2,
  PREVIEW_BUILDER_PROGRESS: () => d,
  PREVIEW_KEYDOWN: () => e,
  REGISTER_SUBSCRIPTION: () => H,
  REQUEST_WHATS_NEW_DATA: () => J,
  RESET_STORY_ARGS: () => W,
  RESULT_WHATS_NEW_DATA: () => Z,
  SAVE_STORY_REQUEST: () => RE,
  SAVE_STORY_RESPONSE: () => _E,
  SELECT_STORY: () => l,
  SET_CONFIG: () => i2,
  SET_CURRENT_STORY: () => p,
  SET_FILTER: () => F,
  SET_GLOBALS: () => u2,
  SET_INDEX: () => M,
  SET_STORIES: () => s2,
  SET_WHATS_NEW_CACHE: () => $,
  SHARED_STATE_CHANGED: () => y2,
  SHARED_STATE_SET: () => c2,
  STORIES_COLLAPSE_ALL: () => g,
  STORIES_EXPAND_ALL: () => h,
  STORY_ARGS_UPDATED: () => f2,
  STORY_CHANGED: () => Q,
  STORY_ERRORED: () => x,
  STORY_FINISHED: () => q,
  STORY_INDEX_INVALIDATED: () => m2,
  STORY_MISSING: () => V,
  STORY_PREPARED: () => w,
  STORY_RENDERED: () => X,
  STORY_RENDER_PHASE_CHANGED: () => B,
  STORY_SPECIFIED: () => b2,
  STORY_THREW_EXCEPTION: () => K,
  STORY_UNCHANGED: () => j,
  TELEMETRY_ERROR: () => EE,
  TESTING_MODULE_CANCEL_TEST_RUN_REQUEST: () => DE,
  TESTING_MODULE_CANCEL_TEST_RUN_RESPONSE: () => IE,
  TESTING_MODULE_CRASH_REPORT: () => NE,
  TESTING_MODULE_PROGRESS_REPORT: () => OE,
  TESTING_MODULE_RUN_ALL_REQUEST: () => rE,
  TESTING_MODULE_RUN_REQUEST: () => AE,
  TOGGLE_WHATS_NEW_NOTIFICATIONS: () => v,
  UNHANDLED_ERRORS_WHILE_PLAYING: () => Y,
  UPDATE_GLOBALS: () => k,
  UPDATE_QUERY_PARAMS: () => n2,
  UPDATE_STORY_ARGS: () => z,
  default: () => _
});
var R = ((E) => (E.CHANNEL_WS_DISCONNECT = "channelWSDisconnect", E.CHANNEL_CREATED = "channelCreated", E.CONFIG_ERROR = "configError", E.STORY_INDEX_INVALIDATED = "storyIndexInvalidated", E.STORY_SPECIFIED = "storySpecified", E.SET_CONFIG = "setConfig", E.SET_STORIES = "setStories", E.SET_INDEX = "setIndex", E.SET_CURRENT_STORY = "setCurrentStory", E.CURRENT_STORY_WAS_SET = "currentStoryWasSet", E.FORCE_RE_RENDER = "forceReRender", E.FORCE_REMOUNT = "forceRemount", E.PRELOAD_ENTRIES = "preloadStories", E.STORY_PREPARED = "storyPrepared", E.DOCS_PREPARED = "docsPrepared", E.STORY_CHANGED = "storyChanged", E.STORY_UNCHANGED = "storyUnchanged", E.STORY_RENDERED = "storyRendered", E.STORY_FINISHED = "storyFinished", E.STORY_MISSING = "storyMissing", E.STORY_ERRORED = "storyErrored", E.STORY_THREW_EXCEPTION = "storyThrewException", E.STORY_RENDER_PHASE_CHANGED = "storyRenderPhaseChanged", E.PLAY_FUNCTION_THREW_EXCEPTION = "playFunctionThrewException", E.UNHANDLED_ERRORS_WHILE_PLAYING = "unhandledErrorsWhilePlaying", E.UPDATE_STORY_ARGS = "updateStoryArgs", E.STORY_ARGS_UPDATED = "storyArgsUpdated", E.RESET_STORY_ARGS = "resetStoryArgs", E.SET_FILTER = "setFilter", E.SET_GLOBALS = "setGlobals", E.UPDATE_GLOBALS = "updateGlobals", E.GLOBALS_UPDATED = "globalsUpdated", E.REGISTER_SUBSCRIPTION = "registerSubscription", E.PREVIEW_KEYDOWN = "previewKeydown", E.PREVIEW_BUILDER_PROGRESS = "preview_builder_progress", E.SELECT_STORY = "selectStory", E.STORIES_COLLAPSE_ALL = "storiesCollapseAll", E.STORIES_EXPAND_ALL = "storiesExpandAll", E.DOCS_RENDERED = "docsRendered", E.SHARED_STATE_CHANGED = "sharedStateChanged", E.SHARED_STATE_SET = "sharedStateSet", E.NAVIGATE_URL = "navigateUrl", E.UPDATE_QUERY_PARAMS = "updateQueryParams", E.REQUEST_WHATS_NEW_DATA = "requestWhatsNewData", E.RESULT_WHATS_NEW_DATA = "resultWhatsNewData", E.SET_WHATS_NEW_CACHE = "setWhatsNewCache", E.TOGGLE_WHATS_NEW_NOTIFICATIONS = "toggleWhatsNewNotifications", E.TELEMETRY_ERROR = "telemetryError", E.FILE_COMPONENT_SEARCH_REQUEST = "fileComponentSearchRequest", E.FILE_COMPONENT_SEARCH_RESPONSE = "fileComponentSearchResponse", E.SAVE_STORY_REQUEST = "saveStoryRequest", E.SAVE_STORY_RESPONSE = "saveStoryResponse", E.ARGTYPES_INFO_REQUEST = "argtypesInfoRequest", E.ARGTYPES_INFO_RESPONSE = "argtypesInfoResponse", E.CREATE_NEW_STORYFILE_REQUEST = "createNewStoryfileRequest", E.CREATE_NEW_STORYFILE_RESPONSE = "createNewStoryfileResponse", E.TESTING_MODULE_CRASH_REPORT = "testingModuleCrashReport", E.TESTING_MODULE_PROGRESS_REPORT = "testingModuleProgressReport", E.TESTING_MODULE_RUN_REQUEST = "testingModuleRunRequest", E.TESTING_MODULE_RUN_ALL_REQUEST = "testingModuleRunAllRequest", E.TESTING_MODULE_CANCEL_TEST_RUN_REQUEST = "testingModuleCancelTestRunRequest", E.TESTING_MODULE_CANCEL_TEST_RUN_RESPONSE = "testingModuleCancelTestRunResponse", E))(R || {});
var _ = R;
var {
  CHANNEL_WS_DISCONNECT: S,
  CHANNEL_CREATED: T,
  CONFIG_ERROR: N,
  CREATE_NEW_STORYFILE_REQUEST: O,
  CREATE_NEW_STORYFILE_RESPONSE: A,
  CURRENT_STORY_WAS_SET: r2,
  DOCS_PREPARED: D,
  DOCS_RENDERED: I,
  FILE_COMPONENT_SEARCH_REQUEST: o,
  FILE_COMPONENT_SEARCH_RESPONSE: C,
  FORCE_RE_RENDER: L2,
  FORCE_REMOUNT: P,
  GLOBALS_UPDATED: U,
  NAVIGATE_URL: G,
  PLAY_FUNCTION_THREW_EXCEPTION: a2,
  UNHANDLED_ERRORS_WHILE_PLAYING: Y,
  PRELOAD_ENTRIES: t2,
  PREVIEW_BUILDER_PROGRESS: d,
  PREVIEW_KEYDOWN: e,
  REGISTER_SUBSCRIPTION: H,
  RESET_STORY_ARGS: W,
  SELECT_STORY: l,
  SET_CONFIG: i2,
  SET_CURRENT_STORY: p,
  SET_FILTER: F,
  SET_GLOBALS: u2,
  SET_INDEX: M,
  SET_STORIES: s2,
  SHARED_STATE_CHANGED: y2,
  SHARED_STATE_SET: c2,
  STORIES_COLLAPSE_ALL: g,
  STORIES_EXPAND_ALL: h,
  STORY_ARGS_UPDATED: f2,
  STORY_CHANGED: Q,
  STORY_ERRORED: x,
  STORY_INDEX_INVALIDATED: m2,
  STORY_MISSING: V,
  STORY_PREPARED: w,
  STORY_RENDER_PHASE_CHANGED: B,
  STORY_RENDERED: X,
  STORY_FINISHED: q,
  STORY_SPECIFIED: b2,
  STORY_THREW_EXCEPTION: K,
  STORY_UNCHANGED: j,
  UPDATE_GLOBALS: k,
  UPDATE_QUERY_PARAMS: n2,
  UPDATE_STORY_ARGS: z,
  REQUEST_WHATS_NEW_DATA: J,
  RESULT_WHATS_NEW_DATA: Z,
  SET_WHATS_NEW_CACHE: $,
  TOGGLE_WHATS_NEW_NOTIFICATIONS: v,
  TELEMETRY_ERROR: EE,
  SAVE_STORY_REQUEST: RE,
  SAVE_STORY_RESPONSE: _E,
  ARGTYPES_INFO_REQUEST: SE,
  ARGTYPES_INFO_RESPONSE: TE,
  TESTING_MODULE_CRASH_REPORT: NE,
  TESTING_MODULE_PROGRESS_REPORT: OE,
  TESTING_MODULE_RUN_REQUEST: AE,
  TESTING_MODULE_RUN_ALL_REQUEST: rE,
  TESTING_MODULE_CANCEL_TEST_RUN_REQUEST: DE,
  TESTING_MODULE_CANCEL_TEST_RUN_RESPONSE: IE
} = R;

// node_modules/@storybook/core/dist/channels/index.js
var ae = Object.create;
var ut = Object.defineProperty;
var se = Object.getOwnPropertyDescriptor;
var le = Object.getOwnPropertyNames;
var ce = Object.getPrototypeOf;
var pe = Object.prototype.hasOwnProperty;
var a3 = (r3, t3) => ut(r3, "name", { value: t3, configurable: true });
var H2 = ((r3) => typeof __require < "u" ? __require : typeof Proxy < "u" ? new Proxy(r3, {
  get: (t3, e2) => (typeof __require < "u" ? __require : t3)[e2]
}) : r3)(function(r3) {
  if (typeof __require < "u") return __require.apply(this, arguments);
  throw Error('Dynamic require of "' + r3 + '" is not supported');
});
var ue = (r3, t3) => () => (t3 || r3((t3 = { exports: {} }).exports, t3), t3.exports);
var fe = (r3, t3, e2, n3) => {
  if (t3 && typeof t3 == "object" || typeof t3 == "function")
    for (let o2 of le(t3))
      !pe.call(r3, o2) && o2 !== e2 && ut(r3, o2, { get: () => t3[o2], enumerable: !(n3 = se(t3, o2)) || n3.enumerable });
  return r3;
};
var he = (r3, t3, e2) => (e2 = r3 != null ? ae(ce(r3)) : {}, fe(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  t3 || !r3 || !r3.__esModule ? ut(e2, "default", { value: r3, enumerable: true }) : e2,
  r3
));
var xt = ue((It, yt) => {
  (function(r3) {
    if (typeof It == "object" && typeof yt < "u")
      yt.exports = r3();
    else if (typeof define == "function" && define.amd)
      define([], r3);
    else {
      var t3;
      typeof window < "u" ? t3 = window : typeof global < "u" ? t3 = global : typeof self < "u" ? t3 = self : t3 = this, t3.memoizerific = r3();
    }
  })(function() {
    var r3, t3, e2;
    return a3(function n3(o2, s3, l2) {
      function c3(p2, u3) {
        if (!s3[p2]) {
          if (!o2[p2]) {
            var y3 = typeof H2 == "function" && H2;
            if (!u3 && y3) return y3(p2, true);
            if (i3) return i3(p2, true);
            var v2 = new Error("Cannot find module '" + p2 + "'");
            throw v2.code = "MODULE_NOT_FOUND", v2;
          }
          var d2 = s3[p2] = { exports: {} };
          o2[p2][0].call(d2.exports, function(m3) {
            var E = o2[p2][1][m3];
            return c3(E || m3);
          }, d2, d2.exports, n3, o2, s3, l2);
        }
        return s3[p2].exports;
      }
      a3(c3, "s");
      for (var i3 = typeof H2 == "function" && H2, g2 = 0; g2 < l2.length; g2++) c3(l2[g2]);
      return c3;
    }, "e")({ 1: [function(n3, o2, s3) {
      o2.exports = function(l2) {
        if (typeof Map != "function" || l2) {
          var c3 = n3("./similar");
          return new c3();
        } else
          return /* @__PURE__ */ new Map();
      };
    }, { "./similar": 2 }], 2: [function(n3, o2, s3) {
      function l2() {
        return this.list = [], this.lastItem = void 0, this.size = 0, this;
      }
      a3(l2, "Similar"), l2.prototype.get = function(c3) {
        var i3;
        if (this.lastItem && this.isEqual(this.lastItem.key, c3))
          return this.lastItem.val;
        if (i3 = this.indexOf(c3), i3 >= 0)
          return this.lastItem = this.list[i3], this.list[i3].val;
      }, l2.prototype.set = function(c3, i3) {
        var g2;
        return this.lastItem && this.isEqual(this.lastItem.key, c3) ? (this.lastItem.val = i3, this) : (g2 = this.indexOf(c3), g2 >= 0 ? (this.lastItem = this.list[g2], this.list[g2].val = i3, this) : (this.lastItem = { key: c3, val: i3 }, this.list.push(this.lastItem), this.size++, this));
      }, l2.prototype.delete = function(c3) {
        var i3;
        if (this.lastItem && this.isEqual(this.lastItem.key, c3) && (this.lastItem = void 0), i3 = this.indexOf(c3), i3 >= 0)
          return this.size--, this.list.splice(i3, 1)[0];
      }, l2.prototype.has = function(c3) {
        var i3;
        return this.lastItem && this.isEqual(this.lastItem.key, c3) ? true : (i3 = this.indexOf(c3), i3 >= 0 ? (this.lastItem = this.list[i3], true) : false);
      }, l2.prototype.forEach = function(c3, i3) {
        var g2;
        for (g2 = 0; g2 < this.size; g2++)
          c3.call(i3 || this, this.list[g2].val, this.list[g2].key, this);
      }, l2.prototype.indexOf = function(c3) {
        var i3;
        for (i3 = 0; i3 < this.size; i3++)
          if (this.isEqual(this.list[i3].key, c3))
            return i3;
        return -1;
      }, l2.prototype.isEqual = function(c3, i3) {
        return c3 === i3 || c3 !== c3 && i3 !== i3;
      }, o2.exports = l2;
    }, {}], 3: [function(n3, o2, s3) {
      var l2 = n3("map-or-similar");
      o2.exports = function(p2) {
        var u3 = new l2(false), y3 = [];
        return function(v2) {
          var d2 = a3(function() {
            var m3 = u3, E, I2, T2 = arguments.length - 1, R2 = Array(T2 + 1), C2 = true, N2;
            if ((d2.numArgs || d2.numArgs === 0) && d2.numArgs !== T2 + 1)
              throw new Error("Memoizerific functions should always be called with the same number of arguments");
            for (N2 = 0; N2 < T2; N2++) {
              if (R2[N2] = {
                cacheItem: m3,
                arg: arguments[N2]
              }, m3.has(arguments[N2])) {
                m3 = m3.get(arguments[N2]);
                continue;
              }
              C2 = false, E = new l2(false), m3.set(arguments[N2], E), m3 = E;
            }
            return C2 && (m3.has(arguments[T2]) ? I2 = m3.get(arguments[T2]) : C2 = false), C2 || (I2 = v2.apply(null, arguments), m3.set(arguments[T2], I2)), p2 > 0 && (R2[T2] = {
              cacheItem: m3,
              arg: arguments[T2]
            }, C2 ? c3(y3, R2) : y3.push(R2), y3.length > p2 && i3(y3.shift())), d2.wasMemoized = C2, d2.numArgs = T2 + 1, I2;
          }, "memoizerific");
          return d2.limit = p2, d2.wasMemoized = false, d2.cache = u3, d2.lru = y3, d2;
        };
      };
      function c3(p2, u3) {
        var y3 = p2.length, v2 = u3.length, d2, m3, E;
        for (m3 = 0; m3 < y3; m3++) {
          for (d2 = true, E = 0; E < v2; E++)
            if (!g2(p2[m3][E].arg, u3[E].arg)) {
              d2 = false;
              break;
            }
          if (d2)
            break;
        }
        p2.push(p2.splice(m3, 1)[0]);
      }
      a3(c3, "moveToMostRecentLru");
      function i3(p2) {
        var u3 = p2.length, y3 = p2[u3 - 1], v2, d2;
        for (y3.cacheItem.delete(y3.arg), d2 = u3 - 2; d2 >= 0 && (y3 = p2[d2], v2 = y3.cacheItem.get(y3.arg), !v2 || !v2.size); d2--)
          y3.cacheItem.delete(y3.arg);
      }
      a3(i3, "removeCachedResult");
      function g2(p2, u3) {
        return p2 === u3 || p2 !== p2 && u3 !== u3;
      }
      a3(g2, "isEqual");
    }, { "map-or-similar": 1 }] }, {}, [3])(3);
  });
});
var S2 = (() => {
  let r3;
  return typeof window < "u" ? r3 = window : typeof globalThis < "u" ? r3 = globalThis : typeof global < "u" ? r3 = global : typeof self < "u" ? r3 = self : r3 = {}, r3;
})();
function F2(r3) {
  for (var t3 = [], e2 = 1; e2 < arguments.length; e2++)
    t3[e2 - 1] = arguments[e2];
  var n3 = Array.from(typeof r3 == "string" ? [r3] : r3);
  n3[n3.length - 1] = n3[n3.length - 1].replace(/\r?\n([\t ]*)$/, "");
  var o2 = n3.reduce(function(c3, i3) {
    var g2 = i3.match(/\n([\t ]+|(?!\s).)/g);
    return g2 ? c3.concat(g2.map(function(p2) {
      var u3, y3;
      return (y3 = (u3 = p2.match(/[\t ]/g)) === null || u3 === void 0 ? void 0 : u3.length) !== null && y3 !== void 0 ? y3 : 0;
    })) : c3;
  }, []);
  if (o2.length) {
    var s3 = new RegExp(`
[	 ]{` + Math.min.apply(Math, o2) + "}", "g");
    n3 = n3.map(function(c3) {
      return c3.replace(s3, `
`);
    });
  }
  n3[0] = n3[0].replace(/^\r?\n/, "");
  var l2 = n3[0];
  return t3.forEach(function(c3, i3) {
    var g2 = l2.match(/(?:^|\n)( *)$/), p2 = g2 ? g2[1] : "", u3 = c3;
    typeof c3 == "string" && c3.includes(`
`) && (u3 = String(c3).split(`
`).map(function(y3, v2) {
      return v2 === 0 ? y3 : "" + p2 + y3;
    }).join(`
`)), l2 += u3 + n3[i3 + 1];
  }), l2;
}
a3(F2, "dedent");
var ft = /* @__PURE__ */ new Map();
var ye = "UNIVERSAL_STORE:";
var x2 = {
  PENDING: "PENDING",
  RESOLVED: "RESOLVED",
  REJECTED: "REJECTED"
};
var h2 = class h3 {
  constructor(t3, e2) {
    this.debugging = false;
    this.listeners = /* @__PURE__ */ new Map([["*", /* @__PURE__ */ new Set()]]);
    this.getState = a3(() => (this.debug("getState", { state: this.state }), this.state), "getState");
    this.subscribe = a3((t4, e3) => {
      let n3 = typeof t4 == "function", o2 = n3 ? "*" : t4, s3 = n3 ? t4 : e3;
      if (this.debug("subscribe", { eventType: o2, listener: s3 }), !s3)
        throw new TypeError(
          `Missing first subscribe argument, or second if first is the event type, when subscribing to a UniversalStore with id '${this.id}'`
        );
      return this.listeners.has(o2) || this.listeners.set(o2, /* @__PURE__ */ new Set()), this.listeners.get(o2).add(s3), () => {
        var _a;
        this.debug("unsubscribe", { eventType: o2, listener: s3 }), this.listeners.has(o2) && (this.listeners.get(o2).delete(s3), ((_a = this.listeners.get(o2)) == null ? void 0 : _a.size) === 0 && this.listeners.delete(o2));
      };
    }, "subscribe");
    this.send = a3((t4) => {
      if (this.debug("send", { event: t4 }), this.status !== h3.Status.READY)
        throw new TypeError(
          F2`Cannot send event before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify(
            {
              event: t4,
              id: this.id,
              actor: this.actor,
              environment: this.environment
            },
            null,
            2
          )}`
        );
      this.emitToListeners(t4, { actor: this.actor }), this.emitToChannel(t4, { actor: this.actor });
    }, "send");
    if (this.debugging = t3.debug ?? false, !h3.isInternalConstructing)
      throw new TypeError(
        "UniversalStore is not constructable - use UniversalStore.create() instead"
      );
    if (h3.isInternalConstructing = false, this.id = t3.id, this.actorId = Date.now().toString(36) + Math.random().toString(36).substring(2), this.actorType = t3.leader ? h3.ActorType.LEADER : h3.ActorType.FOLLOWER, this.state = t3.initialState, this.channelEventName = `${ye}${this.id}`, this.debug("constructor", {
      options: t3,
      environmentOverrides: e2,
      channelEventName: this.channelEventName
    }), this.actor.type === h3.ActorType.LEADER)
      this.syncing = {
        state: x2.RESOLVED,
        promise: Promise.resolve()
      };
    else {
      let n3, o2, s3 = new Promise((l2, c3) => {
        n3 = a3(() => {
          this.syncing.state === x2.PENDING && (this.syncing.state = x2.RESOLVED, l2());
        }, "syncingResolve"), o2 = a3((i3) => {
          this.syncing.state === x2.PENDING && (this.syncing.state = x2.REJECTED, c3(i3));
        }, "syncingReject");
      });
      this.syncing = {
        state: x2.PENDING,
        promise: s3,
        resolve: n3,
        reject: o2
      };
    }
    this.getState = this.getState.bind(this), this.setState = this.setState.bind(this), this.subscribe = this.subscribe.bind(this), this.onStateChange = this.onStateChange.bind(this), this.send = this.send.bind(this), this.emitToChannel = this.emitToChannel.bind(this), this.prepareThis = this.prepareThis.bind(this), this.emitToListeners = this.emitToListeners.bind(this), this.handleChannelEvents = this.handleChannelEvents.bind(
      this
    ), this.debug = this.debug.bind(this), this.channel = (e2 == null ? void 0 : e2.channel) ?? h3.preparation.channel, this.environment = (e2 == null ? void 0 : e2.environment) ?? h3.preparation.environment, this.channel && this.environment ? this.prepareThis({ channel: this.channel, environment: this.environment }) : h3.preparation.promise.then(this.prepareThis);
  }
  static setupPreparationPromise() {
    let t3, e2, n3 = new Promise(
      (o2, s3) => {
        t3 = a3((l2) => {
          o2(l2);
        }, "resolveRef"), e2 = a3((...l2) => {
          s3(l2);
        }, "rejectRef");
      }
    );
    h3.preparation = {
      resolve: t3,
      reject: e2,
      promise: n3
    };
  }
  /** The actor object representing the store instance with a unique ID and a type */
  get actor() {
    return Object.freeze({
      id: this.actorId,
      type: this.actorType,
      environment: this.environment ?? h3.Environment.UNKNOWN
    });
  }
  /**
   * The current state of the store, that signals both if the store is prepared by Storybook and
   * also - in the case of a follower - if the state has been synced with the leader's state.
   */
  get status() {
    var _a;
    if (!this.channel || !this.environment)
      return h3.Status.UNPREPARED;
    switch ((_a = this.syncing) == null ? void 0 : _a.state) {
      case x2.PENDING:
      case void 0:
        return h3.Status.SYNCING;
      case x2.REJECTED:
        return h3.Status.ERROR;
      case x2.RESOLVED:
      default:
        return h3.Status.READY;
    }
  }
  /**
   * A promise that resolves when the store is fully ready. A leader will be ready when the store
   * has been prepared by Storybook, which is almost instantly.
   *
   * A follower will be ready when the state has been synced with the leader's state, within a few
   * hundred milliseconds.
   */
  untilReady() {
    var _a;
    return Promise.all([h3.preparation.promise, (_a = this.syncing) == null ? void 0 : _a.promise]);
  }
  /** Creates a new instance of UniversalStore */
  static create(t3) {
    if (!t3 || typeof (t3 == null ? void 0 : t3.id) != "string")
      throw new TypeError("id is required and must be a string, when creating a UniversalStore");
    t3.debug && console.debug(
      F2`[UniversalStore]
        create`,
      { options: t3 }
    );
    let e2 = ft.get(t3.id);
    if (e2)
      return console.warn(F2`UniversalStore with id "${t3.id}" already exists in this environment, re-using existing.
        You should reuse the existing instance instead of trying to create a new one.`), e2;
    h3.isInternalConstructing = true;
    let n3 = new h3(t3);
    return ft.set(t3.id, n3), n3;
  }
  /**
   * Used by Storybook to set the channel for all instances of UniversalStore in the given
   * environment.
   *
   * @internal
   */
  static __prepare(t3, e2) {
    h3.preparation.channel = t3, h3.preparation.environment = e2, h3.preparation.resolve({ channel: t3, environment: e2 });
  }
  /**
   * Updates the store's state
   *
   * Either a new state or a state updater function can be passed to the method.
   */
  setState(t3) {
    let e2 = this.state, n3 = typeof t3 == "function" ? t3(e2) : t3;
    if (this.debug("setState", { newState: n3, previousState: e2, updater: t3 }), this.status !== h3.Status.READY)
      throw new TypeError(
        F2`Cannot set state before store is ready. You can get the current status with store.status,
        or await store.readyPromise to wait for the store to be ready before sending events.
        ${JSON.stringify(
          {
            newState: n3,
            id: this.id,
            actor: this.actor,
            environment: this.environment
          },
          null,
          2
        )}`
      );
    this.state = n3;
    let o2 = {
      type: h3.InternalEventType.SET_STATE,
      payload: {
        state: n3,
        previousState: e2
      }
    };
    this.emitToChannel(o2, { actor: this.actor }), this.emitToListeners(o2, { actor: this.actor });
  }
  /**
   * Subscribes to state changes
   *
   * @returns Unsubscribe function
   */
  onStateChange(t3) {
    return this.debug("onStateChange", { listener: t3 }), this.subscribe(
      h3.InternalEventType.SET_STATE,
      ({ payload: e2 }, n3) => {
        t3(e2.state, e2.previousState, n3);
      }
    );
  }
  emitToChannel(t3, e2) {
    var _a;
    this.debug("emitToChannel", { event: t3, eventInfo: e2, channel: this.channel }), (_a = this.channel) == null ? void 0 : _a.emit(this.channelEventName, {
      event: t3,
      eventInfo: e2
    });
  }
  prepareThis({
    channel: t3,
    environment: e2
  }) {
    this.channel = t3, this.environment = e2, this.debug("prepared", { channel: t3, environment: e2 }), this.channel.on(this.channelEventName, this.handleChannelEvents), this.actor.type === h3.ActorType.LEADER ? this.emitToChannel(
      { type: h3.InternalEventType.LEADER_CREATED },
      { actor: this.actor }
    ) : (this.emitToChannel(
      { type: h3.InternalEventType.FOLLOWER_CREATED },
      { actor: this.actor }
    ), this.emitToChannel(
      { type: h3.InternalEventType.EXISTING_STATE_REQUEST },
      { actor: this.actor }
    ), setTimeout(() => {
      this.syncing.reject(
        new TypeError(
          `No existing state found for follower with id: '${this.id}'. Make sure a leader with the same id exists before creating a follower.`
        )
      );
    }, 1e3));
  }
  emitToListeners(t3, e2) {
    let n3 = this.listeners.get(t3.type), o2 = this.listeners.get("*");
    this.debug("emitToListeners", {
      event: t3,
      eventInfo: e2,
      eventTypeListeners: n3,
      everythingListeners: o2
    }), [...n3 ?? [], ...o2 ?? []].forEach(
      (s3) => s3(t3, e2)
    );
  }
  handleChannelEvents(t3) {
    var _a, _b, _c, _d, _e2;
    let { event: e2, eventInfo: n3 } = t3;
    if ([n3.actor.id, (_a = n3.forwardingActor) == null ? void 0 : _a.id].includes(this.actor.id)) {
      this.debug("handleChannelEvents: Ignoring event from self", { channelEvent: t3 });
      return;
    } else if (((_b = this.syncing) == null ? void 0 : _b.state) === x2.PENDING && e2.type !== h3.InternalEventType.EXISTING_STATE_RESPONSE) {
      this.debug("handleChannelEvents: Ignoring event while syncing", { channelEvent: t3 });
      return;
    }
    if (this.debug("handleChannelEvents", { channelEvent: t3 }), this.actor.type === h3.ActorType.LEADER) {
      let o2 = true;
      switch (e2.type) {
        case h3.InternalEventType.EXISTING_STATE_REQUEST:
          o2 = false;
          let s3 = {
            type: h3.InternalEventType.EXISTING_STATE_RESPONSE,
            payload: this.state
          };
          this.debug("handleChannelEvents: responding to existing state request", {
            responseEvent: s3
          }), this.emitToChannel(s3, { actor: this.actor });
          break;
        case h3.InternalEventType.LEADER_CREATED:
          o2 = false, this.syncing.state = x2.REJECTED, this.debug("handleChannelEvents: erroring due to second leader being created", {
            event: e2
          }), console.error(
            F2`Detected multiple UniversalStore leaders created with the same id "${this.id}".
            Only one leader can exists at a time, your stores are now in an invalid state.
            Leaders detected:
            this: ${JSON.stringify(this.actor, null, 2)}
            other: ${JSON.stringify(n3.actor, null, 2)}`
          );
          break;
      }
      o2 && (this.debug("handleChannelEvents: forwarding event", { channelEvent: t3 }), this.emitToChannel(e2, { actor: n3.actor, forwardingActor: this.actor }));
    }
    if (this.actor.type === h3.ActorType.FOLLOWER)
      switch (e2.type) {
        case h3.InternalEventType.EXISTING_STATE_RESPONSE:
          if (this.debug("handleChannelEvents: Setting state from leader's existing state response", {
            event: e2
          }), ((_c = this.syncing) == null ? void 0 : _c.state) !== x2.PENDING)
            break;
          (_e2 = (_d = this.syncing).resolve) == null ? void 0 : _e2.call(_d);
          let o2 = {
            type: h3.InternalEventType.SET_STATE,
            payload: {
              state: e2.payload,
              previousState: this.state
            }
          };
          this.state = e2.payload, this.emitToListeners(o2, n3);
          break;
      }
    switch (e2.type) {
      case h3.InternalEventType.SET_STATE:
        this.debug("handleChannelEvents: Setting state", { event: e2 }), this.state = e2.payload.state;
        break;
    }
    this.emitToListeners(e2, { actor: n3.actor });
  }
  debug(t3, e2) {
    this.debugging && console.debug(
      F2`[UniversalStore::${this.id}::${this.environment ?? h3.Environment.UNKNOWN}]
        ${t3}`,
      JSON.stringify(
        {
          data: e2,
          actor: this.actor,
          state: this.state,
          status: this.status
        },
        null,
        2
      )
    );
  }
  /**
   * Used to reset the static fields of the UniversalStore class when cleaning up tests
   *
   * @internal
   */
  static __reset() {
    h3.preparation.reject(new Error("reset")), h3.setupPreparationPromise(), h3.isInternalConstructing = false;
  }
};
a3(h2, "UniversalStore"), /**
* Defines the possible actor types in the store system
*
* @readonly
*/
h2.ActorType = {
  LEADER: "LEADER",
  FOLLOWER: "FOLLOWER"
}, /**
* Defines the possible environments the store can run in
*
* @readonly
*/
h2.Environment = {
  SERVER: "SERVER",
  MANAGER: "MANAGER",
  PREVIEW: "PREVIEW",
  UNKNOWN: "UNKNOWN",
  MOCK: "MOCK"
}, /**
* Internal event types used for store synchronization
*
* @readonly
*/
h2.InternalEventType = {
  EXISTING_STATE_REQUEST: "__EXISTING_STATE_REQUEST",
  EXISTING_STATE_RESPONSE: "__EXISTING_STATE_RESPONSE",
  SET_STATE: "__SET_STATE",
  LEADER_CREATED: "__LEADER_CREATED",
  FOLLOWER_CREATED: "__FOLLOWER_CREATED"
}, h2.Status = {
  UNPREPARED: "UNPREPARED",
  SYNCING: "SYNCING",
  READY: "READY",
  ERROR: "ERROR"
}, // This is used to check if constructor was called from the static factory create()
h2.isInternalConstructing = false, h2.setupPreparationPromise();
var $2 = h2;
var de = a3((r3) => r3.transports !== void 0, "isMulti");
var ge = a3(() => Math.random().toString(16).slice(2), "generateRandomId");
var ht = class ht2 {
  constructor(t3 = {}) {
    this.sender = ge();
    this.events = {};
    this.data = {};
    this.transports = [];
    this.isAsync = t3.async || false, de(t3) ? (this.transports = t3.transports || [], this.transports.forEach((e2) => {
      e2.setHandler((n3) => this.handleEvent(n3));
    })) : this.transports = t3.transport ? [t3.transport] : [], this.transports.forEach((e2) => {
      e2.setHandler((n3) => this.handleEvent(n3));
    });
  }
  get hasTransport() {
    return this.transports.length > 0;
  }
  addListener(t3, e2) {
    this.events[t3] = this.events[t3] || [], this.events[t3].push(e2);
  }
  emit(t3, ...e2) {
    let n3 = { type: t3, args: e2, from: this.sender }, o2 = {};
    e2.length >= 1 && e2[0] && e2[0].options && (o2 = e2[0].options);
    let s3 = a3(() => {
      this.transports.forEach((l2) => {
        l2.send(n3, o2);
      }), this.handleEvent(n3);
    }, "handler");
    this.isAsync ? setImmediate(s3) : s3();
  }
  last(t3) {
    return this.data[t3];
  }
  eventNames() {
    return Object.keys(this.events);
  }
  listenerCount(t3) {
    let e2 = this.listeners(t3);
    return e2 ? e2.length : 0;
  }
  listeners(t3) {
    return this.events[t3] || void 0;
  }
  once(t3, e2) {
    let n3 = this.onceListener(t3, e2);
    this.addListener(t3, n3);
  }
  removeAllListeners(t3) {
    t3 ? this.events[t3] && delete this.events[t3] : this.events = {};
  }
  removeListener(t3, e2) {
    let n3 = this.listeners(t3);
    n3 && (this.events[t3] = n3.filter((o2) => o2 !== e2));
  }
  on(t3, e2) {
    this.addListener(t3, e2);
  }
  off(t3, e2) {
    this.removeListener(t3, e2);
  }
  handleEvent(t3) {
    let e2 = this.listeners(t3.type);
    e2 && e2.length && e2.forEach((n3) => {
      n3.apply(t3, t3.args);
    }), this.data[t3.type] = t3.args;
  }
  onceListener(t3, e2) {
    let n3 = a3((...o2) => (this.removeListener(t3, n3), e2(...o2)), "onceListener");
    return n3;
  }
};
a3(ht, "Channel");
var B2 = ht;
var ve = Object.create;
var Ot = Object.defineProperty;
var me = Object.getOwnPropertyDescriptor;
var Ct = Object.getOwnPropertyNames;
var Ee = Object.getPrototypeOf;
var be = Object.prototype.hasOwnProperty;
var P2 = a3((r3, t3) => a3(function() {
  return t3 || (0, r3[Ct(r3)[0]])((t3 = { exports: {} }).exports, t3), t3.exports;
}, "__require"), "__commonJS");
var Se = a3((r3, t3, e2, n3) => {
  if (t3 && typeof t3 == "object" || typeof t3 == "function")
    for (let o2 of Ct(t3))
      !be.call(r3, o2) && o2 !== e2 && Ot(r3, o2, { get: a3(() => t3[o2], "get"), enumerable: !(n3 = me(t3, o2)) || n3.enumerable });
  return r3;
}, "__copyProps");
var ot = a3((r3, t3, e2) => (e2 = r3 != null ? ve(Ee(r3)) : {}, Se(
  t3 || !r3 || !r3.__esModule ? Ot(e2, "default", { value: r3, enumerable: true }) : e2,
  r3
)), "__toESM");
var _e = [
  "bubbles",
  "cancelBubble",
  "cancelable",
  "composed",
  "currentTarget",
  "defaultPrevented",
  "eventPhase",
  "isTrusted",
  "returnValue",
  "srcElement",
  "target",
  "timeStamp",
  "type"
];
var Te = ["detail"];
function Pt(r3) {
  let t3 = _e.filter((e2) => r3[e2] !== void 0).reduce((e2, n3) => ({ ...e2, [n3]: r3[n3] }), {});
  return r3 instanceof CustomEvent && Te.filter((e2) => r3[e2] !== void 0).forEach((e2) => {
    t3[e2] = r3[e2];
  }), t3;
}
a3(Pt, "extractEventHiddenProperties");
var Bt = he(xt(), 1);
var Ft = P2({
  "node_modules/has-symbols/shams.js"(r3, t3) {
    "use strict";
    t3.exports = a3(function() {
      if (typeof Symbol != "function" || typeof Object.getOwnPropertySymbols != "function")
        return false;
      if (typeof Symbol.iterator == "symbol")
        return true;
      var n3 = {}, o2 = Symbol("test"), s3 = Object(o2);
      if (typeof o2 == "string" || Object.prototype.toString.call(o2) !== "[object Symbol]" || Object.prototype.toString.call(s3) !== "[object Symbol]")
        return false;
      var l2 = 42;
      n3[o2] = l2;
      for (o2 in n3)
        return false;
      if (typeof Object.keys == "function" && Object.keys(n3).length !== 0 || typeof Object.getOwnPropertyNames == "function" && Object.getOwnPropertyNames(
        n3
      ).length !== 0)
        return false;
      var c3 = Object.getOwnPropertySymbols(n3);
      if (c3.length !== 1 || c3[0] !== o2 || !Object.prototype.propertyIsEnumerable.call(n3, o2))
        return false;
      if (typeof Object.getOwnPropertyDescriptor == "function") {
        var i3 = Object.getOwnPropertyDescriptor(n3, o2);
        if (i3.value !== l2 || i3.enumerable !== true)
          return false;
      }
      return true;
    }, "hasSymbols");
  }
});
var Mt = P2({
  "node_modules/has-symbols/index.js"(r3, t3) {
    "use strict";
    var e2 = typeof Symbol < "u" && Symbol, n3 = Ft();
    t3.exports = a3(function() {
      return typeof e2 != "function" || typeof Symbol != "function" || typeof e2("foo") != "symbol" || typeof Symbol("bar") != "symbol" ? false : n3();
    }, "hasNativeSymbols");
  }
});
var Ae = P2({
  "node_modules/function-bind/implementation.js"(r3, t3) {
    "use strict";
    var e2 = "Function.prototype.bind called on incompatible ", n3 = Array.prototype.slice, o2 = Object.prototype.toString, s3 = "[object Function]";
    t3.exports = a3(function(c3) {
      var i3 = this;
      if (typeof i3 != "function" || o2.call(i3) !== s3)
        throw new TypeError(e2 + i3);
      for (var g2 = n3.call(arguments, 1), p2, u3 = a3(function() {
        if (this instanceof p2) {
          var E = i3.apply(
            this,
            g2.concat(n3.call(arguments))
          );
          return Object(E) === E ? E : this;
        } else
          return i3.apply(
            c3,
            g2.concat(n3.call(arguments))
          );
      }, "binder"), y3 = Math.max(0, i3.length - g2.length), v2 = [], d2 = 0; d2 < y3; d2++)
        v2.push("$" + d2);
      if (p2 = Function("binder", "return function (" + v2.join(",") + "){ return binder.apply(this,arguments); }")(u3), i3.prototype) {
        var m3 = a3(function() {
        }, "Empty2");
        m3.prototype = i3.prototype, p2.prototype = new m3(), m3.prototype = null;
      }
      return p2;
    }, "bind");
  }
});
var gt = P2({
  "node_modules/function-bind/index.js"(r3, t3) {
    "use strict";
    var e2 = Ae();
    t3.exports = Function.prototype.bind || e2;
  }
});
var we = P2({
  "node_modules/has/src/index.js"(r3, t3) {
    "use strict";
    var e2 = gt();
    t3.exports = e2.call(Function.call, Object.prototype.hasOwnProperty);
  }
});
var $t = P2({
  "node_modules/get-intrinsic/index.js"(r3, t3) {
    "use strict";
    var e2, n3 = SyntaxError, o2 = Function, s3 = TypeError, l2 = a3(function(j2) {
      try {
        return o2('"use strict"; return (' + j2 + ").constructor;")();
      } catch {
      }
    }, "getEvalledConstructor"), c3 = Object.getOwnPropertyDescriptor;
    if (c3)
      try {
        c3({}, "");
      } catch {
        c3 = null;
      }
    var i3 = a3(function() {
      throw new s3();
    }, "throwTypeError"), g2 = c3 ? function() {
      try {
        return arguments.callee, i3;
      } catch {
        try {
          return c3(arguments, "callee").get;
        } catch {
          return i3;
        }
      }
    }() : i3, p2 = Mt()(), u3 = Object.getPrototypeOf || function(j2) {
      return j2.__proto__;
    }, y3 = {}, v2 = typeof Uint8Array > "u" ? e2 : u3(Uint8Array), d2 = {
      "%AggregateError%": typeof AggregateError > "u" ? e2 : AggregateError,
      "%Array%": Array,
      "%ArrayBuffer%": typeof ArrayBuffer > "u" ? e2 : ArrayBuffer,
      "%ArrayIteratorPrototype%": p2 ? u3([][Symbol.iterator]()) : e2,
      "%AsyncFromSyncIteratorPrototype%": e2,
      "%AsyncFunction%": y3,
      "%AsyncGenerator%": y3,
      "%AsyncGeneratorFunction%": y3,
      "%AsyncIteratorPrototype%": y3,
      "%Atomics%": typeof Atomics > "u" ? e2 : Atomics,
      "%BigInt%": typeof BigInt > "u" ? e2 : BigInt,
      "%Boolean%": Boolean,
      "%DataView%": typeof DataView > "u" ? e2 : DataView,
      "%Date%": Date,
      "%decodeURI%": decodeURI,
      "%decodeURIComponent%": decodeURIComponent,
      "%encodeURI%": encodeURI,
      "%encodeURIComponent%": encodeURIComponent,
      "%Error%": Error,
      "%eval%": eval,
      "%EvalError%": EvalError,
      "%Float32Array%": typeof Float32Array > "u" ? e2 : Float32Array,
      "%Float64Array%": typeof Float64Array > "u" ? e2 : Float64Array,
      "%FinalizationRegistry%": typeof FinalizationRegistry > "u" ? e2 : FinalizationRegistry,
      "%Function%": o2,
      "%GeneratorFunction%": y3,
      "%Int8Array%": typeof Int8Array > "u" ? e2 : Int8Array,
      "%Int16Array%": typeof Int16Array > "u" ? e2 : Int16Array,
      "%Int32Array%": typeof Int32Array > "u" ? e2 : Int32Array,
      "%isFinite%": isFinite,
      "%isNaN%": isNaN,
      "%IteratorPrototype%": p2 ? u3(u3([][Symbol.iterator]())) : e2,
      "%JSON%": typeof JSON == "object" ? JSON : e2,
      "%Map%": typeof Map > "u" ? e2 : Map,
      "%MapIteratorPrototype%": typeof Map > "u" || !p2 ? e2 : u3((/* @__PURE__ */ new Map())[Symbol.iterator]()),
      "%Math%": Math,
      "%Number%": Number,
      "%Object%": Object,
      "%parseFloat%": parseFloat,
      "%parseInt%": parseInt,
      "%Promise%": typeof Promise > "u" ? e2 : Promise,
      "%Proxy%": typeof Proxy > "u" ? e2 : Proxy,
      "%RangeError%": RangeError,
      "%ReferenceError%": ReferenceError,
      "%Reflect%": typeof Reflect > "u" ? e2 : Reflect,
      "%RegExp%": RegExp,
      "%Set%": typeof Set > "u" ? e2 : Set,
      "%SetIteratorPrototype%": typeof Set > "u" || !p2 ? e2 : u3((/* @__PURE__ */ new Set())[Symbol.iterator]()),
      "%SharedArrayBuffer%": typeof SharedArrayBuffer > "u" ? e2 : SharedArrayBuffer,
      "%String%": String,
      "%StringIteratorPrototype%": p2 ? u3(""[Symbol.iterator]()) : e2,
      "%Symbol%": p2 ? Symbol : e2,
      "%SyntaxError%": n3,
      "%ThrowTypeError%": g2,
      "%TypedArray%": v2,
      "%TypeError%": s3,
      "%Uint8Array%": typeof Uint8Array > "u" ? e2 : Uint8Array,
      "%Uint8ClampedArray%": typeof Uint8ClampedArray > "u" ? e2 : Uint8ClampedArray,
      "%Uint16Array%": typeof Uint16Array > "u" ? e2 : Uint16Array,
      "%Uint32Array%": typeof Uint32Array > "u" ? e2 : Uint32Array,
      "%URIError%": URIError,
      "%WeakMap%": typeof WeakMap > "u" ? e2 : WeakMap,
      "%WeakRef%": typeof WeakRef > "u" ? e2 : WeakRef,
      "%WeakSet%": typeof WeakSet > "u" ? e2 : WeakSet
    }, m3 = a3(function j2(b3) {
      var A2;
      if (b3 === "%AsyncFunction%")
        A2 = l2("async function () {}");
      else if (b3 === "%GeneratorFunction%")
        A2 = l2("function* () {}");
      else if (b3 === "%AsyncGeneratorFunction%")
        A2 = l2("async function* () {}");
      else if (b3 === "%AsyncGenerator%") {
        var _2 = j2("%AsyncGeneratorFunction%");
        _2 && (A2 = _2.prototype);
      } else if (b3 === "%AsyncIteratorPrototype%") {
        var w2 = j2("%AsyncGenerator%");
        w2 && (A2 = u3(w2.prototype));
      }
      return d2[b3] = A2, A2;
    }, "doEval2"), E = {
      "%ArrayBufferPrototype%": ["ArrayBuffer", "prototype"],
      "%ArrayPrototype%": ["Array", "prototype"],
      "%ArrayProto_entries%": ["Array", "prototype", "entries"],
      "%ArrayProto_forEach%": ["Array", "prototype", "forEach"],
      "%ArrayProto_keys%": ["Array", "prototype", "keys"],
      "%ArrayProto_values%": ["Array", "prototype", "values"],
      "%AsyncFunctionPrototype%": ["AsyncFunction", "prototype"],
      "%AsyncGenerator%": ["AsyncGeneratorFunction", "prototype"],
      "%AsyncGeneratorPrototype%": ["AsyncGeneratorFunction", "prototype", "prototype"],
      "%BooleanPrototype%": ["Boolean", "prototype"],
      "%DataViewPrototype%": ["DataView", "prototype"],
      "%DatePrototype%": ["Date", "prototype"],
      "%ErrorPrototype%": ["Error", "prototype"],
      "%EvalErrorPrototype%": ["EvalError", "prototype"],
      "%Float32ArrayPrototype%": ["Float32Array", "prototype"],
      "%Float64ArrayPrototype%": ["Float64Array", "prototype"],
      "%FunctionPrototype%": ["Function", "prototype"],
      "%Generator%": ["GeneratorFunction", "prototype"],
      "%GeneratorPrototype%": ["GeneratorFunction", "prototype", "prototype"],
      "%Int8ArrayPrototype%": ["Int8Array", "prototype"],
      "%Int16ArrayPrototype%": ["Int16Array", "prototype"],
      "%Int32ArrayPrototype%": ["Int32Array", "prototype"],
      "%JSONParse%": ["JSON", "parse"],
      "%JSONStringify%": ["JSON", "stringify"],
      "%MapPrototype%": ["Map", "prototype"],
      "%NumberPrototype%": ["Number", "prototype"],
      "%ObjectPrototype%": ["Object", "prototype"],
      "%ObjProto_toString%": ["Object", "prototype", "toString"],
      "%ObjProto_valueOf%": ["Object", "prototype", "valueOf"],
      "%PromisePrototype%": ["Promise", "prototype"],
      "%PromiseProto_then%": ["Promise", "prototype", "then"],
      "%Promise_all%": ["Promise", "all"],
      "%Promise_reject%": ["Promise", "reject"],
      "%Promise_resolve%": ["Promise", "resolve"],
      "%RangeErrorPrototype%": ["RangeError", "prototype"],
      "%ReferenceErrorPrototype%": ["ReferenceError", "prototype"],
      "%RegExpPrototype%": ["RegExp", "prototype"],
      "%SetPrototype%": ["Set", "prototype"],
      "%SharedArrayBufferPrototype%": ["SharedArrayBuffer", "prototype"],
      "%StringPrototype%": ["String", "prototype"],
      "%SymbolPrototype%": ["Symbol", "prototype"],
      "%SyntaxErrorPrototype%": ["SyntaxError", "prototype"],
      "%TypedArrayPrototype%": ["TypedArray", "prototype"],
      "%TypeErrorPrototype%": ["TypeError", "prototype"],
      "%Uint8ArrayPrototype%": ["Uint8Array", "prototype"],
      "%Uint8ClampedArrayPrototype%": ["Uint8ClampedArray", "prototype"],
      "%Uint16ArrayPrototype%": ["Uint16Array", "prototype"],
      "%Uint32ArrayPrototype%": ["Uint32Array", "prototype"],
      "%URIErrorPrototype%": ["URIError", "prototype"],
      "%WeakMapPrototype%": ["WeakMap", "prototype"],
      "%WeakSetPrototype%": ["WeakSet", "prototype"]
    }, I2 = gt(), T2 = we(), R2 = I2.call(Function.call, Array.prototype.concat), C2 = I2.call(Function.apply, Array.prototype.splice), N2 = I2.call(
      Function.call,
      String.prototype.replace
    ), Q2 = I2.call(Function.call, String.prototype.slice), ee = I2.call(Function.call, RegExp.prototype.exec), re = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g, ne = /\\(\\)?/g, oe = a3(
      function(b3) {
        var A2 = Q2(b3, 0, 1), _2 = Q2(b3, -1);
        if (A2 === "%" && _2 !== "%")
          throw new n3("invalid intrinsic syntax, expected closing `%`");
        if (_2 === "%" && A2 !== "%")
          throw new n3("invalid intrinsic syntax, expected opening `%`");
        var w2 = [];
        return N2(b3, re, function(L3, M2, O2, Z2) {
          w2[w2.length] = O2 ? N2(Z2, ne, "$1") : M2 || L3;
        }), w2;
      },
      "stringToPath3"
    ), ie = a3(function(b3, A2) {
      var _2 = b3, w2;
      if (T2(E, _2) && (w2 = E[_2], _2 = "%" + w2[0] + "%"), T2(d2, _2)) {
        var L3 = d2[_2];
        if (L3 === y3 && (L3 = m3(_2)), typeof L3 > "u" && !A2)
          throw new s3("intrinsic " + b3 + " exists, but is not available. Please file an issue!");
        return {
          alias: w2,
          name: _2,
          value: L3
        };
      }
      throw new n3("intrinsic " + b3 + " does not exist!");
    }, "getBaseIntrinsic2");
    t3.exports = a3(function(b3, A2) {
      if (typeof b3 != "string" || b3.length === 0)
        throw new s3("intrinsic name must be a non-empty string");
      if (arguments.length > 1 && typeof A2 != "boolean")
        throw new s3('"allowMissing" argument must be a boolean');
      if (ee(/^%?[^%]*%?$/, b3) === null)
        throw new n3("`%` may not be present anywhere but at the beginning and end of the intrinsic name");
      var _2 = oe(b3), w2 = _2.length > 0 ? _2[0] : "", L3 = ie("%" + w2 + "%", A2), M2 = L3.name, O2 = L3.value, Z2 = false, pt = L3.alias;
      pt && (w2 = pt[0], C2(_2, R2([0, 1], pt)));
      for (var tt = 1, z2 = true; tt < _2.length; tt += 1) {
        var D2 = _2[tt], et = Q2(D2, 0, 1), rt = Q2(D2, -1);
        if ((et === '"' || et === "'" || et === "`" || rt === '"' || rt === "'" || rt === "`") && et !== rt)
          throw new n3("property names with quotes must have matching quotes");
        if ((D2 === "constructor" || !z2) && (Z2 = true), w2 += "." + D2, M2 = "%" + w2 + "%", T2(d2, M2))
          O2 = d2[M2];
        else if (O2 != null) {
          if (!(D2 in O2)) {
            if (!A2)
              throw new s3("base intrinsic for " + b3 + " exists, but the property is not available.");
            return;
          }
          if (c3 && tt + 1 >= _2.length) {
            var nt = c3(O2, D2);
            z2 = !!nt, z2 && "get" in nt && !("originalValue" in nt.get) ? O2 = nt.get : O2 = O2[D2];
          } else
            z2 = T2(O2, D2), O2 = O2[D2];
          z2 && !Z2 && (d2[M2] = O2);
        }
      }
      return O2;
    }, "GetIntrinsic");
  }
});
var Oe = P2({
  "node_modules/call-bind/index.js"(r3, t3) {
    "use strict";
    var e2 = gt(), n3 = $t(), o2 = n3("%Function.prototype.apply%"), s3 = n3("%Function.prototype.call%"), l2 = n3("%Reflect.apply%", true) || e2.call(
      s3,
      o2
    ), c3 = n3("%Object.getOwnPropertyDescriptor%", true), i3 = n3("%Object.defineProperty%", true), g2 = n3("%Math.max%");
    if (i3)
      try {
        i3({}, "a", { value: 1 });
      } catch {
        i3 = null;
      }
    t3.exports = a3(function(y3) {
      var v2 = l2(e2, s3, arguments);
      if (c3 && i3) {
        var d2 = c3(v2, "length");
        d2.configurable && i3(
          v2,
          "length",
          { value: 1 + g2(0, y3.length - (arguments.length - 1)) }
        );
      }
      return v2;
    }, "callBind");
    var p2 = a3(function() {
      return l2(e2, o2, arguments);
    }, "applyBind2");
    i3 ? i3(t3.exports, "apply", { value: p2 }) : t3.exports.apply = p2;
  }
});
var Ce = P2({
  "node_modules/call-bind/callBound.js"(r3, t3) {
    "use strict";
    var e2 = $t(), n3 = Oe(), o2 = n3(e2("String.prototype.indexOf"));
    t3.exports = a3(function(l2, c3) {
      var i3 = e2(l2, !!c3);
      return typeof i3 == "function" && o2(l2, ".prototype.") > -1 ? n3(i3) : i3;
    }, "callBoundIntrinsic");
  }
});
var Pe = P2({
  "node_modules/has-tostringtag/shams.js"(r3, t3) {
    "use strict";
    var e2 = Ft();
    t3.exports = a3(function() {
      return e2() && !!Symbol.toStringTag;
    }, "hasToStringTagShams");
  }
});
var Ie = P2({
  "node_modules/is-regex/index.js"(r3, t3) {
    "use strict";
    var e2 = Ce(), n3 = Pe()(), o2, s3, l2, c3;
    n3 && (o2 = e2("Object.prototype.hasOwnProperty"), s3 = e2("RegExp.prototype.exec"), l2 = {}, i3 = a3(function() {
      throw l2;
    }, "throwRegexMarker"), c3 = {
      toString: i3,
      valueOf: i3
    }, typeof Symbol.toPrimitive == "symbol" && (c3[Symbol.toPrimitive] = i3));
    var i3, g2 = e2("Object.prototype.toString"), p2 = Object.getOwnPropertyDescriptor, u3 = "[object RegExp]";
    t3.exports = a3(n3 ? function(v2) {
      if (!v2 || typeof v2 != "object")
        return false;
      var d2 = p2(v2, "lastIndex"), m3 = d2 && o2(d2, "value");
      if (!m3)
        return false;
      try {
        s3(v2, c3);
      } catch (E) {
        return E === l2;
      }
    } : function(v2) {
      return !v2 || typeof v2 != "object" && typeof v2 != "function" ? false : g2(v2) === u3;
    }, "isRegex");
  }
});
var xe = P2({
  "node_modules/is-function/index.js"(r3, t3) {
    t3.exports = n3;
    var e2 = Object.prototype.toString;
    function n3(o2) {
      if (!o2)
        return false;
      var s3 = e2.call(o2);
      return s3 === "[object Function]" || typeof o2 == "function" && s3 !== "[object RegExp]" || typeof window < "u" && (o2 === window.setTimeout || o2 === window.alert || o2 === window.confirm || o2 === window.prompt);
    }
    a3(n3, "isFunction3");
  }
});
var Re = P2({
  "node_modules/is-symbol/index.js"(r3, t3) {
    "use strict";
    var e2 = Object.prototype.toString, n3 = Mt()();
    n3 ? (o2 = Symbol.prototype.toString, s3 = /^Symbol\(.*\)$/, l2 = a3(function(i3) {
      return typeof i3.valueOf() != "symbol" ? false : s3.test(o2.call(i3));
    }, "isRealSymbolObject"), t3.exports = a3(function(i3) {
      if (typeof i3 == "symbol")
        return true;
      if (e2.call(i3) !== "[object Symbol]")
        return false;
      try {
        return l2(i3);
      } catch {
        return false;
      }
    }, "isSymbol3")) : t3.exports = a3(function(i3) {
      return false;
    }, "isSymbol3");
    var o2, s3, l2;
  }
});
var Ne = ot(Ie());
var je = ot(xe());
var Le = ot(Re());
function De(r3) {
  return r3 != null && typeof r3 == "object" && Array.isArray(r3) === false;
}
a3(De, "isObject");
var Fe = typeof global == "object" && global && global.Object === Object && global;
var Me = Fe;
var $e = typeof self == "object" && self && self.Object === Object && self;
var Ue = Me || $e || Function("return this")();
var vt = Ue;
var ke = vt.Symbol;
var U2 = ke;
var Ut = Object.prototype;
var Ge = Ut.hasOwnProperty;
var We = Ut.toString;
var q2 = U2 ? U2.toStringTag : void 0;
function ze(r3) {
  var t3 = Ge.call(r3, q2), e2 = r3[q2];
  try {
    r3[q2] = void 0;
    var n3 = true;
  } catch {
  }
  var o2 = We.call(r3);
  return n3 && (t3 ? r3[q2] = e2 : delete r3[q2]), o2;
}
a3(ze, "getRawTag");
var He = ze;
var Be = Object.prototype;
var qe = Be.toString;
function Ve(r3) {
  return qe.call(r3);
}
a3(Ve, "objectToString");
var Je = Ve;
var Ke = "[object Null]";
var Ye = "[object Undefined]";
var Rt = U2 ? U2.toStringTag : void 0;
function Xe(r3) {
  return r3 == null ? r3 === void 0 ? Ye : Ke : Rt && Rt in Object(r3) ? He(r3) : Je(r3);
}
a3(Xe, "baseGetTag");
var kt = Xe;
function Qe(r3) {
  return r3 != null && typeof r3 == "object";
}
a3(Qe, "isObjectLike");
var Ze = Qe;
var tr = "[object Symbol]";
function er(r3) {
  return typeof r3 == "symbol" || Ze(r3) && kt(r3) == tr;
}
a3(er, "isSymbol");
var mt = er;
function rr(r3, t3) {
  for (var e2 = -1, n3 = r3 == null ? 0 : r3.length, o2 = Array(n3); ++e2 < n3; )
    o2[e2] = t3(r3[e2], e2, r3);
  return o2;
}
a3(rr, "arrayMap");
var nr = rr;
var or = Array.isArray;
var Et = or;
var ir = 1 / 0;
var Nt = U2 ? U2.prototype : void 0;
var jt = Nt ? Nt.toString : void 0;
function Gt(r3) {
  if (typeof r3 == "string")
    return r3;
  if (Et(r3))
    return nr(r3, Gt) + "";
  if (mt(r3))
    return jt ? jt.call(r3) : "";
  var t3 = r3 + "";
  return t3 == "0" && 1 / r3 == -ir ? "-0" : t3;
}
a3(Gt, "baseToString");
var ar = Gt;
function sr(r3) {
  var t3 = typeof r3;
  return r3 != null && (t3 == "object" || t3 == "function");
}
a3(sr, "isObject2");
var Wt = sr;
var lr = "[object AsyncFunction]";
var cr = "[object Function]";
var pr = "[object GeneratorFunction]";
var ur = "[object Proxy]";
function fr(r3) {
  if (!Wt(r3))
    return false;
  var t3 = kt(r3);
  return t3 == cr || t3 == pr || t3 == lr || t3 == ur;
}
a3(fr, "isFunction");
var hr = fr;
var yr = vt["__core-js_shared__"];
var dt = yr;
var Lt = function() {
  var r3 = /[^.]+$/.exec(dt && dt.keys && dt.keys.IE_PROTO || "");
  return r3 ? "Symbol(src)_1." + r3 : "";
}();
function dr(r3) {
  return !!Lt && Lt in r3;
}
a3(dr, "isMasked");
var gr = dr;
var vr = Function.prototype;
var mr = vr.toString;
function Er(r3) {
  if (r3 != null) {
    try {
      return mr.call(r3);
    } catch {
    }
    try {
      return r3 + "";
    } catch {
    }
  }
  return "";
}
a3(Er, "toSource");
var br = Er;
var Sr = /[\\^$.*+?()[\]{}|]/g;
var _r = /^\[object .+?Constructor\]$/;
var Tr = Function.prototype;
var Ar = Object.prototype;
var wr = Tr.toString;
var Or = Ar.hasOwnProperty;
var Cr = RegExp(
  "^" + wr.call(Or).replace(Sr, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Pr(r3) {
  if (!Wt(r3) || gr(r3))
    return false;
  var t3 = hr(r3) ? Cr : _r;
  return t3.test(br(r3));
}
a3(Pr, "baseIsNative");
var Ir = Pr;
function xr(r3, t3) {
  return r3 == null ? void 0 : r3[t3];
}
a3(xr, "getValue");
var Rr = xr;
function Nr(r3, t3) {
  var e2 = Rr(r3, t3);
  return Ir(e2) ? e2 : void 0;
}
a3(Nr, "getNative");
var zt = Nr;
function jr(r3, t3) {
  return r3 === t3 || r3 !== r3 && t3 !== t3;
}
a3(jr, "eq");
var Lr = jr;
var Dr = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/;
var Fr = /^\w*$/;
function Mr(r3, t3) {
  if (Et(r3))
    return false;
  var e2 = typeof r3;
  return e2 == "number" || e2 == "symbol" || e2 == "boolean" || r3 == null || mt(r3) ? true : Fr.test(r3) || !Dr.test(r3) || t3 != null && r3 in Object(
    t3
  );
}
a3(Mr, "isKey");
var $r = Mr;
var Ur = zt(Object, "create");
var V2 = Ur;
function kr() {
  this.__data__ = V2 ? V2(null) : {}, this.size = 0;
}
a3(kr, "hashClear");
var Gr = kr;
function Wr(r3) {
  var t3 = this.has(r3) && delete this.__data__[r3];
  return this.size -= t3 ? 1 : 0, t3;
}
a3(Wr, "hashDelete");
var zr = Wr;
var Hr = "__lodash_hash_undefined__";
var Br = Object.prototype;
var qr = Br.hasOwnProperty;
function Vr(r3) {
  var t3 = this.__data__;
  if (V2) {
    var e2 = t3[r3];
    return e2 === Hr ? void 0 : e2;
  }
  return qr.call(t3, r3) ? t3[r3] : void 0;
}
a3(Vr, "hashGet");
var Jr = Vr;
var Kr = Object.prototype;
var Yr = Kr.hasOwnProperty;
function Xr(r3) {
  var t3 = this.__data__;
  return V2 ? t3[r3] !== void 0 : Yr.call(t3, r3);
}
a3(Xr, "hashHas");
var Qr = Xr;
var Zr = "__lodash_hash_undefined__";
function tn(r3, t3) {
  var e2 = this.__data__;
  return this.size += this.has(r3) ? 0 : 1, e2[r3] = V2 && t3 === void 0 ? Zr : t3, this;
}
a3(tn, "hashSet");
var en = tn;
function k2(r3) {
  var t3 = -1, e2 = r3 == null ? 0 : r3.length;
  for (this.clear(); ++t3 < e2; ) {
    var n3 = r3[t3];
    this.set(n3[0], n3[1]);
  }
}
a3(k2, "Hash");
k2.prototype.clear = Gr;
k2.prototype.delete = zr;
k2.prototype.get = Jr;
k2.prototype.has = Qr;
k2.prototype.set = en;
var Dt = k2;
function rn() {
  this.__data__ = [], this.size = 0;
}
a3(rn, "listCacheClear");
var nn = rn;
function on(r3, t3) {
  for (var e2 = r3.length; e2--; )
    if (Lr(r3[e2][0], t3))
      return e2;
  return -1;
}
a3(on, "assocIndexOf");
var at = on;
var an = Array.prototype;
var sn = an.splice;
function ln(r3) {
  var t3 = this.__data__, e2 = at(t3, r3);
  if (e2 < 0)
    return false;
  var n3 = t3.length - 1;
  return e2 == n3 ? t3.pop() : sn.call(t3, e2, 1), --this.size, true;
}
a3(ln, "listCacheDelete");
var cn = ln;
function pn(r3) {
  var t3 = this.__data__, e2 = at(t3, r3);
  return e2 < 0 ? void 0 : t3[e2][1];
}
a3(pn, "listCacheGet");
var un = pn;
function fn(r3) {
  return at(this.__data__, r3) > -1;
}
a3(fn, "listCacheHas");
var hn = fn;
function yn(r3, t3) {
  var e2 = this.__data__, n3 = at(e2, r3);
  return n3 < 0 ? (++this.size, e2.push([r3, t3])) : e2[n3][1] = t3, this;
}
a3(yn, "listCacheSet");
var dn = yn;
function G2(r3) {
  var t3 = -1, e2 = r3 == null ? 0 : r3.length;
  for (this.clear(); ++t3 < e2; ) {
    var n3 = r3[t3];
    this.set(n3[0], n3[1]);
  }
}
a3(G2, "ListCache");
G2.prototype.clear = nn;
G2.prototype.delete = cn;
G2.prototype.get = un;
G2.prototype.has = hn;
G2.prototype.set = dn;
var gn = G2;
var vn = zt(vt, "Map");
var mn = vn;
function En() {
  this.size = 0, this.__data__ = {
    hash: new Dt(),
    map: new (mn || gn)(),
    string: new Dt()
  };
}
a3(En, "mapCacheClear");
var bn = En;
function Sn(r3) {
  var t3 = typeof r3;
  return t3 == "string" || t3 == "number" || t3 == "symbol" || t3 == "boolean" ? r3 !== "__proto__" : r3 === null;
}
a3(Sn, "isKeyable");
var _n = Sn;
function Tn(r3, t3) {
  var e2 = r3.__data__;
  return _n(t3) ? e2[typeof t3 == "string" ? "string" : "hash"] : e2.map;
}
a3(Tn, "getMapData");
var st = Tn;
function An(r3) {
  var t3 = st(this, r3).delete(r3);
  return this.size -= t3 ? 1 : 0, t3;
}
a3(An, "mapCacheDelete");
var wn = An;
function On(r3) {
  return st(this, r3).get(r3);
}
a3(On, "mapCacheGet");
var Cn = On;
function Pn(r3) {
  return st(this, r3).has(r3);
}
a3(Pn, "mapCacheHas");
var In = Pn;
function xn(r3, t3) {
  var e2 = st(this, r3), n3 = e2.size;
  return e2.set(r3, t3), this.size += e2.size == n3 ? 0 : 1, this;
}
a3(xn, "mapCacheSet");
var Rn = xn;
function W2(r3) {
  var t3 = -1, e2 = r3 == null ? 0 : r3.length;
  for (this.clear(); ++t3 < e2; ) {
    var n3 = r3[t3];
    this.set(n3[0], n3[1]);
  }
}
a3(W2, "MapCache");
W2.prototype.clear = bn;
W2.prototype.delete = wn;
W2.prototype.get = Cn;
W2.prototype.has = In;
W2.prototype.set = Rn;
var Ht = W2;
var Nn = "Expected a function";
function bt(r3, t3) {
  if (typeof r3 != "function" || t3 != null && typeof t3 != "function")
    throw new TypeError(Nn);
  var e2 = a3(function() {
    var n3 = arguments, o2 = t3 ? t3.apply(this, n3) : n3[0], s3 = e2.cache;
    if (s3.has(o2))
      return s3.get(o2);
    var l2 = r3.apply(this, n3);
    return e2.cache = s3.set(o2, l2) || s3, l2;
  }, "memoized");
  return e2.cache = new (bt.Cache || Ht)(), e2;
}
a3(bt, "memoize");
bt.Cache = Ht;
var jn = bt;
var Ln = 500;
function Dn(r3) {
  var t3 = jn(r3, function(n3) {
    return e2.size === Ln && e2.clear(), n3;
  }), e2 = t3.cache;
  return t3;
}
a3(Dn, "memoizeCapped");
var Fn = Dn;
var Mn = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
var $n = /\\(\\)?/g;
var Un = Fn(
  function(r3) {
    var t3 = [];
    return r3.charCodeAt(0) === 46 && t3.push(""), r3.replace(Mn, function(e2, n3, o2, s3) {
      t3.push(o2 ? s3.replace($n, "$1") : n3 || e2);
    }), t3;
  }
);
var kn = Un;
function Gn(r3) {
  return r3 == null ? "" : ar(r3);
}
a3(Gn, "toString");
var Wn = Gn;
function zn(r3, t3) {
  return Et(r3) ? r3 : $r(r3, t3) ? [r3] : kn(Wn(r3));
}
a3(zn, "castPath");
var Hn = zn;
var Bn = 1 / 0;
function qn(r3) {
  if (typeof r3 == "string" || mt(r3))
    return r3;
  var t3 = r3 + "";
  return t3 == "0" && 1 / r3 == -Bn ? "-0" : t3;
}
a3(qn, "toKey");
var Vn = qn;
function Jn(r3, t3) {
  t3 = Hn(t3, r3);
  for (var e2 = 0, n3 = t3.length; r3 != null && e2 < n3; )
    r3 = r3[Vn(t3[e2++])];
  return e2 && e2 == n3 ? r3 : void 0;
}
a3(Jn, "baseGet");
var Kn = Jn;
function Yn(r3, t3, e2) {
  var n3 = r3 == null ? void 0 : Kn(r3, t3);
  return n3 === void 0 ? e2 : n3;
}
a3(Yn, "get");
var Xn = Yn;
var it = De;
var Qn = a3((r3) => {
  let t3 = null, e2 = false, n3 = false, o2 = false, s3 = "";
  if (r3.indexOf("//") >= 0 || r3.indexOf("/*") >= 0)
    for (let l2 = 0; l2 < r3.length; l2 += 1)
      !t3 && !e2 && !n3 && !o2 ? r3[l2] === '"' || r3[l2] === "'" || r3[l2] === "`" ? t3 = r3[l2] : r3[l2] === "/" && r3[l2 + 1] === "*" ? e2 = true : r3[l2] === "/" && r3[l2 + 1] === "/" ? n3 = true : r3[l2] === "/" && r3[l2 + 1] !== "/" && (o2 = true) : (t3 && (r3[l2] === t3 && r3[l2 - 1] !== "\\" || r3[l2] === `
` && t3 !== "`") && (t3 = null), o2 && (r3[l2] === "/" && r3[l2 - 1] !== "\\" || r3[l2] === `
`) && (o2 = false), e2 && r3[l2 - 1] === "/" && r3[l2 - 2] === "*" && (e2 = false), n3 && r3[l2] === `
` && (n3 = false)), !e2 && !n3 && (s3 += r3[l2]);
  else
    s3 = r3;
  return s3;
}, "removeCodeComments");
var Zn = (0, Bt.default)(1e4)(
  (r3) => Qn(r3).replace(/\n\s*/g, "").trim()
);
var to = a3(function(t3, e2) {
  let n3 = e2.slice(0, e2.indexOf("{")), o2 = e2.slice(e2.indexOf("{"));
  if (n3.includes("=>") || n3.includes("function"))
    return e2;
  let s3 = n3;
  return s3 = s3.replace(t3, "function"), s3 + o2;
}, "convertShorthandMethods2");
var eo = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z$/;
var J2 = a3(
  (r3) => r3.match(/^[\[\{\"\}].*[\]\}\"]$/),
  "isJSON"
);
function qt(r3) {
  if (!it(r3))
    return r3;
  let t3 = r3, e2 = false;
  return typeof Event < "u" && r3 instanceof Event && (t3 = Pt(t3), e2 = true), t3 = Object.keys(t3).reduce((n3, o2) => {
    try {
      t3[o2] && t3[o2].toJSON, n3[o2] = t3[o2];
    } catch {
      e2 = true;
    }
    return n3;
  }, {}), e2 ? t3 : r3;
}
a3(qt, "convertUnconventionalData");
var ro = a3(function(t3) {
  let e2, n3, o2, s3;
  return a3(function(c3, i3) {
    try {
      if (c3 === "")
        return s3 = [], e2 = /* @__PURE__ */ new Map([[i3, "[]"]]), n3 = /* @__PURE__ */ new Map(), o2 = [], i3;
      let g2 = n3.get(this) || this;
      for (; o2.length && g2 !== o2[0]; )
        o2.shift(), s3.pop();
      if (typeof i3 == "boolean")
        return i3;
      if (i3 === void 0)
        return t3.allowUndefined ? "_undefined_" : void 0;
      if (i3 === null)
        return null;
      if (typeof i3 == "number")
        return i3 === -1 / 0 ? "_-Infinity_" : i3 === 1 / 0 ? "_Infinity_" : Number.isNaN(i3) ? "_NaN_" : i3;
      if (typeof i3 == "bigint")
        return `_bigint_${i3.toString()}`;
      if (typeof i3 == "string")
        return eo.test(i3) ? t3.allowDate ? `_date_${i3}` : void 0 : i3;
      if ((0, Ne.default)(i3))
        return t3.allowRegExp ? `_regexp_${i3.flags}|${i3.source}` : void 0;
      if ((0, je.default)(i3)) {
        if (!t3.allowFunction)
          return;
        let { name: u3 } = i3, y3 = i3.toString();
        return y3.match(
          /(\[native code\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/
        ) ? `_function_${u3}|${(() => {
        }).toString()}` : `_function_${u3}|${Zn(to(c3, y3))}`;
      }
      if ((0, Le.default)(i3)) {
        if (!t3.allowSymbol)
          return;
        let u3 = Symbol.keyFor(i3);
        return u3 !== void 0 ? `_gsymbol_${u3}` : `_symbol_${i3.toString().slice(7, -1)}`;
      }
      if (o2.length >= t3.maxDepth)
        return Array.isArray(i3) ? `[Array(${i3.length})]` : "[Object]";
      if (i3 === this)
        return `_duplicate_${JSON.stringify(s3)}`;
      if (i3 instanceof Error && t3.allowError)
        return {
          __isConvertedError__: true,
          errorProperties: {
            ...i3.cause ? { cause: i3.cause } : {},
            ...i3,
            name: i3.name,
            message: i3.message,
            stack: i3.stack,
            "_constructor-name_": i3.constructor.name
          }
        };
      if (i3.constructor && i3.constructor.name && i3.constructor.name !== "Object" && !Array.isArray(i3) && !t3.allowClass)
        return;
      let p2 = e2.get(i3);
      if (!p2) {
        let u3 = Array.isArray(i3) ? i3 : qt(i3);
        if (i3.constructor && i3.constructor.name && i3.constructor.name !== "Object" && !Array.isArray(i3) && t3.allowClass)
          try {
            Object.assign(u3, { "_constructor-name_": i3.constructor.name });
          } catch {
          }
        return s3.push(c3), o2.unshift(u3), e2.set(i3, JSON.stringify(s3)), i3 !== u3 && n3.set(i3, u3), u3;
      }
      return `_duplicate_${p2}`;
    } catch {
      return;
    }
  }, "replace");
}, "replacer2");
var no = a3(function reviver(options) {
  let refs = [], root;
  return a3(function revive(key, value) {
    if (key === "" && (root = value, refs.forEach(({ target: r3, container: t3, replacement: e2 }) => {
      let n3 = J2(e2) ? JSON.parse(e2) : e2.split(".");
      n3.length === 0 ? t3[r3] = root : t3[r3] = Xn(root, n3);
    })), key === "_constructor-name_")
      return value;
    if (it(value) && value.__isConvertedError__) {
      let { message: r3, ...t3 } = value.errorProperties, e2 = new Error(r3);
      return Object.assign(e2, t3), e2;
    }
    if (it(value) && value["_constructor-name_"] && options.allowFunction) {
      let r3 = value["_constructor-name_"];
      if (r3 !== "Object") {
        let t3 = new Function(`return function ${r3.replace(/[^a-zA-Z0-9$_]+/g, "")}(){}`)();
        Object.setPrototypeOf(value, new t3());
      }
      return delete value["_constructor-name_"], value;
    }
    if (typeof value == "string" && value.startsWith("_function_") && options.allowFunction) {
      let [, name, source] = value.match(/_function_([^|]*)\|(.*)/) || [], sourceSanitized = source.replace(/[(\(\))|\\| |\]|`]*$/, "");
      if (!options.lazyEval)
        return eval(`(${sourceSanitized})`);
      let result = a3((...args) => {
        let f = eval(`(${sourceSanitized})`);
        return f(...args);
      }, "result");
      return Object.defineProperty(result, "toString", {
        value: a3(() => sourceSanitized, "value")
      }), Object.defineProperty(result, "name", {
        value: name
      }), result;
    }
    if (typeof value == "string" && value.startsWith("_regexp_") && options.allowRegExp) {
      let [, r3, t3] = value.match(/_regexp_([^|]*)\|(.*)/) || [];
      return new RegExp(t3, r3);
    }
    return typeof value == "string" && value.startsWith("_date_") && options.allowDate ? new Date(value.replace("_date_", "")) : typeof value == "string" && value.startsWith("_duplicate_") ? (refs.push({ target: key, container: this, replacement: value.replace(/^_duplicate_/, "") }), null) : typeof value == "string" && value.startsWith("_symbol_") && options.allowSymbol ? Symbol(value.replace("_symbol_", "")) : typeof value == "string" && value.startsWith("_gsymbol_") && options.allowSymbol ? Symbol.for(value.replace("_gsymbol_", "")) : typeof value == "string" && value === "_-Infinity_" ? -1 / 0 : typeof value == "string" && value === "_Infinity_" ? 1 / 0 : typeof value == "string" && value === "_NaN_" ? NaN : typeof value == "string" && value.startsWith("_bigint_") && typeof BigInt == "function" ? BigInt(value.replace("_bigint_", "")) : value;
  }, "revive");
}, "reviver");
var Vt = {
  maxDepth: 10,
  space: void 0,
  allowFunction: true,
  allowRegExp: true,
  allowDate: true,
  allowClass: true,
  allowError: true,
  allowUndefined: true,
  allowSymbol: true,
  lazyEval: true
};
var lt = a3((r3, t3 = {}) => {
  let e2 = { ...Vt, ...t3 };
  return JSON.stringify(qt(r3), ro(e2), t3.space);
}, "stringify");
var oo = a3(() => {
  let r3 = /* @__PURE__ */ new Map();
  return a3(function t3(e2) {
    it(e2) && Object.entries(e2).forEach(([n3, o2]) => {
      o2 === "_undefined_" ? e2[n3] = void 0 : r3.get(o2) || (r3.set(o2, true), t3(o2));
    }), Array.isArray(e2) && e2.forEach((n3, o2) => {
      n3 === "_undefined_" ? (r3.set(n3, true), e2[o2] = void 0) : r3.get(n3) || (r3.set(n3, true), t3(n3));
    });
  }, "mutateUndefined");
}, "mutator");
var ct = a3((r3, t3 = {}) => {
  let e2 = { ...Vt, ...t3 }, n3 = JSON.parse(r3, no(e2));
  return oo()(n3), n3;
}, "parse");
var io = false;
var St = "Invariant failed";
function K2(r3, t3) {
  if (!r3) {
    if (io)
      throw new Error(St);
    var e2 = typeof t3 == "function" ? t3() : t3, n3 = e2 ? "".concat(St, ": ").concat(e2) : St;
    throw new Error(n3);
  }
}
a3(K2, "invariant");
var Jt = a3((r3) => {
  let t3 = Array.from(
    document.querySelectorAll("iframe[data-is-storybook]")
  ), [e2, ...n3] = t3.filter((s3) => {
    var _a, _b;
    try {
      return ((_a = s3.contentWindow) == null ? void 0 : _a.location.origin) === r3.source.location.origin && ((_b = s3.contentWindow) == null ? void 0 : _b.location.pathname) === r3.source.location.pathname;
    } catch {
    }
    try {
      return s3.contentWindow === r3.source;
    } catch {
    }
    let l2 = s3.getAttribute("src"), c3;
    try {
      if (!l2)
        return false;
      ({ origin: c3 } = new URL(l2, document.location.toString()));
    } catch {
      return false;
    }
    return c3 === r3.origin;
  }), o2 = e2 == null ? void 0 : e2.getAttribute("src");
  if (o2 && n3.length === 0) {
    let { protocol: s3, host: l2, pathname: c3 } = new URL(o2, document.location.toString());
    return `${s3}//${l2}${c3}`;
  }
  return n3.length > 0 && s.error("found multiple candidates for event source"), null;
}, "getEventSourceUrl");
var { document: _t, location: Tt } = S2;
var Xt = "storybook-channel";
var lo = { allowFunction: false, maxDepth: 25 };
var At = class At2 {
  constructor(t3) {
    this.config = t3;
    this.connected = false;
    if (this.buffer = [], typeof (S2 == null ? void 0 : S2.addEventListener) == "function" && S2.addEventListener("message", this.handleEvent.bind(this), false), t3.page !== "manager" && t3.page !== "preview")
      throw new Error(`postmsg-channel: "config.page" cannot be "${t3.page}"`);
  }
  setHandler(t3) {
    this.handler = (...e2) => {
      t3.apply(this, e2), !this.connected && this.getLocalFrame().length && (this.flush(), this.connected = true);
    };
  }
  /**
   * Sends `event` to the associated window. If the window does not yet exist the event will be
   * stored in a buffer and sent when the window exists.
   *
   * @param event
   */
  send(t3, e2) {
    let {
      target: n3,
      // telejson options
      allowRegExp: o2,
      allowFunction: s3,
      allowSymbol: l2,
      allowDate: c3,
      allowError: i3,
      allowUndefined: g2,
      allowClass: p2,
      maxDepth: u3,
      space: y3,
      lazyEval: v2
    } = e2 || {}, d2 = Object.fromEntries(
      Object.entries({
        allowRegExp: o2,
        allowFunction: s3,
        allowSymbol: l2,
        allowDate: c3,
        allowError: i3,
        allowUndefined: g2,
        allowClass: p2,
        maxDepth: u3,
        space: y3,
        lazyEval: v2
      }).filter(([R2, C2]) => typeof C2 < "u")
    ), m3 = {
      ...lo,
      ...S2.CHANNEL_OPTIONS || {},
      ...d2
    }, E = this.getFrames(n3), I2 = new URLSearchParams((Tt == null ? void 0 : Tt.search) || ""), T2 = lt(
      {
        key: Xt,
        event: t3,
        refId: I2.get("refId")
      },
      m3
    );
    return E.length ? (this.buffer.length && this.flush(), E.forEach((R2) => {
      try {
        R2.postMessage(T2, "*");
      } catch {
        s.error("sending over postmessage fail");
      }
    }), Promise.resolve(null)) : new Promise((R2, C2) => {
      this.buffer.push({ event: t3, resolve: R2, reject: C2 });
    });
  }
  flush() {
    let { buffer: t3 } = this;
    this.buffer = [], t3.forEach((e2) => {
      this.send(e2.event).then(e2.resolve).catch(e2.reject);
    });
  }
  getFrames(t3) {
    if (this.config.page === "manager") {
      let n3 = Array.from(
        _t.querySelectorAll("iframe[data-is-storybook][data-is-loaded]")
      ).flatMap((o2) => {
        try {
          return o2.contentWindow && o2.dataset.isStorybook !== void 0 && o2.id === t3 ? [o2.contentWindow] : [];
        } catch {
          return [];
        }
      });
      return (n3 == null ? void 0 : n3.length) ? n3 : this.getCurrentFrames();
    }
    return S2 && S2.parent && S2.parent !== S2.self ? [S2.parent] : [];
  }
  getCurrentFrames() {
    return this.config.page === "manager" ? Array.from(
      _t.querySelectorAll('[data-is-storybook="true"]')
    ).flatMap((e2) => e2.contentWindow ? [e2.contentWindow] : []) : S2 && S2.parent ? [S2.parent] : [];
  }
  getLocalFrame() {
    return this.config.page === "manager" ? Array.from(
      _t.querySelectorAll("#storybook-preview-iframe")
    ).flatMap((e2) => e2.contentWindow ? [e2.contentWindow] : []) : S2 && S2.parent ? [S2.parent] : [];
  }
  handleEvent(t3) {
    try {
      let { data: e2 } = t3, { key: n3, event: o2, refId: s3 } = typeof e2 == "string" && J2(e2) ? ct(e2, S2.CHANNEL_OPTIONS || {}) : e2;
      if (n3 === Xt) {
        let l2 = this.config.page === "manager" ? '<span style="color: #37D5D3; background: black"> manager </span>' : '<span style="color: #1EA7FD; background: black"> preview </span>', c3 = Object.values(core_events_exports).includes(o2.type) ? `<span style="color: #FF4785">${o2.type}</span>` : `<span style="color: #FFAE00">${o2.type}</span>`;
        if (s3 && (o2.refId = s3), o2.source = this.config.page === "preview" ? t3.origin : Jt(t3), !o2.source) {
          r.error(
            `${l2} received ${c3} but was unable to determine the source of the event`
          );
          return;
        }
        let i3 = `${l2} received ${c3} (${e2.length})`;
        r.debug(
          Tt.origin !== o2.source ? i3 : `${i3} <span style="color: gray">(on ${Tt.origin} from ${o2.source})</span>`,
          ...o2.args
        ), K2(this.handler, "ChannelHandler should be set"), this.handler(o2);
      }
    } catch (e2) {
      s.error(e2);
    }
  }
};
a3(At, "PostMessageTransport");
var Y2 = At;
var { WebSocket: co } = S2;
var Zt = 15e3;
var te = 5e3;
var wt = class wt2 {
  constructor({ url: t3, onError: e2, page: n3 }) {
    this.buffer = [];
    this.isReady = false;
    this.isClosed = false;
    this.pingTimeout = 0;
    this.socket = new co(t3), this.socket.onopen = () => {
      this.isReady = true, this.heartbeat(), this.flush();
    }, this.socket.onmessage = ({ data: o2 }) => {
      let s3 = typeof o2 == "string" && J2(o2) ? ct(o2) : o2;
      K2(this.handler, "WebsocketTransport handler should be set"), this.handler(s3), s3.type === "ping" && (this.heartbeat(), this.send({ type: "pong" }));
    }, this.socket.onerror = (o2) => {
      e2 && e2(o2);
    }, this.socket.onclose = (o2) => {
      K2(this.handler, "WebsocketTransport handler should be set"), this.handler({
        type: S,
        args: [{ reason: o2.reason, code: o2.code }],
        from: n3 || "preview"
      }), this.isClosed = true, clearTimeout(this.pingTimeout);
    };
  }
  heartbeat() {
    clearTimeout(this.pingTimeout), this.pingTimeout = setTimeout(() => {
      this.socket.close(3008, "timeout");
    }, Zt + te);
  }
  setHandler(t3) {
    this.handler = t3;
  }
  send(t3) {
    this.isClosed || (this.isReady ? this.sendNow(t3) : this.sendLater(t3));
  }
  sendLater(t3) {
    this.buffer.push(t3);
  }
  sendNow(t3) {
    let e2 = lt(t3, {
      maxDepth: 15,
      allowFunction: false,
      ...S2.CHANNEL_OPTIONS
    });
    this.socket.send(e2);
  }
  flush() {
    let { buffer: t3 } = this;
    this.buffer = [], t3.forEach((e2) => this.send(e2));
  }
};
a3(wt, "WebsocketTransport");
var X2 = wt;
var { CONFIG_TYPE: po } = S2;
var Xo = B2;
function Qo({ page: r3, extraTransports: t3 = [] }) {
  let e2 = [new Y2({ page: r3 }), ...t3];
  if (po === "DEVELOPMENT") {
    let o2 = window.location.protocol === "http:" ? "ws" : "wss", { hostname: s3, port: l2 } = window.location, c3 = `${o2}://${s3}:${l2}/storybook-server-channel`;
    e2.push(new X2({ url: c3, onError: a3(() => {
    }, "onError"), page: r3 }));
  }
  let n3 = new B2({ transports: e2 });
  return $2.__prepare(
    n3,
    r3 === "manager" ? $2.Environment.MANAGER : $2.Environment.PREVIEW
  ), n3;
}
a3(Qo, "createBrowserChannel");

export {
  s,
  n,
  m,
  N,
  r2 as r,
  D,
  I,
  L2 as L,
  P,
  U,
  a2 as a,
  Y,
  t2 as t,
  e,
  W,
  p,
  u2 as u,
  f2 as f,
  Q,
  x,
  m2,
  V,
  w,
  B,
  X,
  q,
  b2 as b,
  K,
  j,
  k,
  n2,
  z,
  SE,
  TE,
  B2,
  Y2,
  Zt,
  te,
  X2,
  Qo
};
//# sourceMappingURL=chunk-YULXVUVA.js.map
